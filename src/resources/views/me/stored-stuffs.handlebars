

<div class="mt-4">
        <div class="row">
            <h3>Đây Là Trang Lưu Trữ Phụ Kiện</h3>
            {{#each stuffs}}
            <div class="col-sm-6 col-lg-2 card-separate">
                <div class="card mt-4 card-frame">
                    <div clas="image-frame">
                    <img src="/img/{{this.image}}" class="card-img-top card-image" alt="...">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title card-name">{{this.name}}</h5>
                        <div class="price-space">
                          <div class="card-text card-price">{{this.price}}</div>
                          <div class="card-text card-origin">{{this.origin}}</div>
                        </div>
                        <p class="card-text card-description">{{this.description}}</p>
                    </div>
                    <li><hr class="dropdown-divider"></li>
                    <div class="btn-fix-separate">
                        <a class="btn btn-primary " href="/stuffs/{{this._id}}/stuff-edit" role="button">Sửa</a>
                        <a class="btn btn-primary " href="#" role="button" data-bs-toggle="modal" data-bs-target="#Stuff-Delete-Modal" data-id="{{this._id}}">Xóa</a>
                    </div>
                    
                </div>
            </div>
           {{/each}}
        </div>
</div>

<div class="modal fade" id="Stuff-Delete-Modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Xác nhận xóa?</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Không Xóa</button>
        <button type="button" class="btn btn-danger" id="btn-delete-stuff">Có xóa</button>
      </div>
    </div>
  </div>
</div>

<!--Delete Hidden Form -->

<form method="POST" name="delete-stuff-form"></form>

<script>

document.addEventListener('DOMContentLoaded', function() {
    var stuffId;
    var deleteForm = document.forms['delete-stuff-form'];

    //when dialog confirm clicked
     $('#Stuff-Delete-Modal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal
        stuffId = button.data('id'); // Extract info from data-* attributes
        //console.log(stuffId);
        //console.log('DOM fuly load');
    });
   
var btnDeleteStuff = document.getElementById('btn-delete-stuff');
    //console.log(btnDeletestuff);

    // When Delete btn click
btnDeleteStuff.onclick = function () {
    deleteForm.action = '/stuffs/' + stuffId + '?_method=DELETE';
    deleteForm.submit();
}
});

    
</script>